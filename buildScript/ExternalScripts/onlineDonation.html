<!--######-->
<!--### IMPORTANT !!!!!-->
<!--### THIS IS THE JS SCRIPT YOU NEED TO ADD TO Render components on a page-->
<!--### without doing this first, none of the custom script will run.-->
<script src="https://mentonegirlsit.bitbucket.io/build/ccpay.1656991579.js"></script><script>
  ccpay.initPayDiv('payment-form')
</script>


<script>
  const BASE_URL = 'https://appdev.mentonegirls.vic.edu.au';

  const renderScripts = function(mainJsUrl, mainCssUrl, loadCss = false) {
    const manifestId = 'mgg-app-manifest';
    const cssId = 'mgg-app-css';
    const jsId = 'mgg-app-js';
    const header = document.getElementsByTagName('head')[0];
    if (!header) {
      return;
    }

    if (!document.getElementById(manifestId)) {
        const manifest = document.createElement('link');
        manifest.id = manifestId;
        manifest.ref = "manifest";
        manifest.href = `${BASE_URL}/manifest.json`;
        header.appendChild(manifest);
    }

    if (loadCss === true && !document.getElementById(cssId)) {
      const mainCss = document.createElement('link');
      mainCss.id = cssId;
      mainCss.rel = "stylesheet";
      mainCss.type = "text/css";
      mainCss.href = `${BASE_URL}${mainCssUrl}`;
      header.appendChild(mainCss);
    }
    if (!document.getElementById(jsId)) {
      const mainJs = document.createElement('script');
      mainJs.id = jsId;
      mainJs.defer = true;
      mainJs.async = true;
      mainJs.src = `${BASE_URL}${mainJsUrl}`;
      document.body.appendChild(mainJs);
    }
  }

  const fetchData = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, false);
    // xhr.responseType = 'json';
    xhr.onload = function() {
      const status = xhr.status;
      callback(status, xhr.response);
    };
    xhr.send(null);
  };

  const run = function() {
    fetchData(`${BASE_URL}/asset-manifest.json`, (status, response) => {
      if (status !== 200) {
        return null;
      }
      try {

          const responseObj = JSON.parse(response);
          if (responseObj.files) {
            const mainJsString = `${responseObj.files['main.js']}`.trim();
            const mainCssString = `${responseObj.files['main.css']}`.trim();
            // initHtml();
            renderScripts(mainJsString, mainCssString, true);
          }
      } catch (err) {
        console.error(err);
      }
    })
  }

  window.onload = function() {
    run();
  }

</script>
<div class="mgg-app online-donation" />
